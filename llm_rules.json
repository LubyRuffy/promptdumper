{
  "rules": [
    {
      "provider": "openai_compatible",
      "provider_by_port": { "1234": "lmstudio", "11434": "openai" },
      "request": {
        "methods": ["POST"],
        "path_regex": "^/v1/(chat/completions|completions|embeddings)",
        "headers": [
          { "name_regex": "^content-type$", "value_regex": "application/json" }
        ],
        "body_contains_any": ["\"model\"", "\"messages\"", "\"prompt\""]
      },
      "response": {
        "body_contains_any": ["\"choices\""]
      }
    },
    {
      "provider": "ollama",
      "request": {
        "methods": ["POST"],
        "path_regex": "^/api/(generate|chat)",
        "headers": [
          { "name_regex": "^content-type$", "value_regex": "application/json|text/event-stream" }
        ]
      },
      "response": {
        "body_contains_any": ["\"response\"", "\"message\"", "\"model\"", "\"choices\""]
      }
    },
    {
      "provider": "cherry-studio",
      "request": {
        "methods": ["POST"],
        "path_regex": "^/chat/completions$",
        "headers": [
          { "name_regex": "(?i)^(host|:authority)$", "value_regex": "^api\\.cherry-ai\\.com(:\\d+)?$" }
        ],
        "body_contains_any": ["\"model\""]
      },
      "response": {
        "body_contains_any": ["\"choices\""]
      }
    },
    {
      "provider": "cherry-studio",
      "request": {
        "methods": ["POST"],
        "path_regex": "^/chat/completions$",
        "body_contains_any": ["\"model\""]
      },
      "response": {
        "body_contains_any": ["\"choices\""]
      }
    }
  ]
}


